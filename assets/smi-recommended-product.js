var SmiComplementaryProduct=class{swiper=null;sectionId=null;sectionEl=null;curreny_format=null;curreny_format_first=null;list_bundle_selected_purchase=null;total_bundle_selected=0;list_bundled_add_to_cart_all=[];add=!1;total_recommendation=0;constructor(sectionId){this.sectionId=sectionId.replace("smi-",""),this.sectionEl=document.getElementById(`${this.sectionId}`),this.list_bundle_selected_purchase=[],this.curreny_format="",this.curreny_format_first="",this.total_bundle_selected=0,this.list_bundled_add_to_cart_all=[],this.add=!1,this.total_recommendation=0,this.renderComplementaryProducts(this.sectionId,this.sectionEl),setTimeout((()=>{this.renderBundleProducts(this.sectionId)}),200),document.addEventListener("smiBlockProductBundleChange",(()=>{this.renderComplementaryProducts(this.sectionId,this.sectionEl),setTimeout((()=>{this.renderBundleProducts(this.sectionId)}),500)}))}renderBundleProducts(section_id){let bundleItemWrapper=document.getElementById(`smi_bundle_products_${section_id}`);if(bundleItemWrapper){this.smiInitBundleProduct();try{fetch(bundleItemWrapper.dataset.url).then((response=>response.text())).then((text=>{const recommendations=(new DOMParser).parseFromString(text,"text/html").getElementById(`smi_bundle_products_${section_id}`);recommendations&&recommendations.innerHTML.trim().length?setTimeout((()=>{document.getElementById(`bundle_product_${this.sectionId}`).style.display="block",bundleItemWrapper.innerHTML=recommendations.innerHTML;let obj=document.getElementById(`checking_size_bundle_${this.sectionId}`).getAttribute("data-render-bundle");this.total_recommendation=parseInt(document.querySelector(`#checking_size_bundle_${this.sectionId}`).getAttribute("total-recommendation")),obj&&(this.total_bundle_selected=JSON.parse(obj).length),this.smiInitBundleProduct(),this.handleArrowPaginationSwiperBundle()}),0):document.getElementById(`bundle_product_${this.sectionId}`).style.display="none"})).catch((e=>{}))}catch(error){}}}renderComplementaryProducts(section_id){let itemWrapper=document.getElementById(`smi_complementary_products_${section_id}`);if(itemWrapper){this.smiInitComplementaryProduct();try{fetch(itemWrapper.dataset.url).then((response=>response.text())).then((text=>{const recommendations=(new DOMParser).parseFromString(text,"text/html").getElementById(`smi_complementary_products_${section_id}`);recommendations&&recommendations.innerHTML.trim().length?setTimeout((()=>{document.getElementById(`complementary_product_${this.sectionId}`).style.display="block",itemWrapper.innerHTML=recommendations.innerHTML,this.smiInitComplementaryProduct(),this.handleArrowPaginationSwiper()}),0):document.getElementById(`complementary_product_${this.sectionId}`).style.display="none"})).catch((e=>{console.error(e)}))}catch(error){}}}handleArrowPaginationSwiper(){const section=document.getElementById(`complementary_product_${this.sectionId}`);section.querySelectorAll(".sticky-page-dot-complementary").forEach((el=>{const btnNext=section.querySelector('[data-control="textNextSlide"]'),btnPrev=section.querySelector('[data-control="textPrevSlide"]');if(btnNext&&btnPrev){let swiperEl=section.querySelector(".swiper");btnNext.addEventListener("click",(()=>{swiperEl.swiper.slideNext()})),btnPrev.addEventListener("click",(()=>{swiperEl.swiper.slidePrev()}))}}))}handleArrowPaginationSwiperBundle(){const section=document.getElementById(`bundle_product_${this.sectionId}`);section.querySelectorAll(".sticky-page-dot-bundle").forEach((el=>{const btnNext=section.querySelector('[data-control="textNextSlide"]'),btnPrev=section.querySelector('[data-control="textPrevSlide"]');if(btnNext&&btnPrev){let swiperEl=section.querySelector(".swiper");btnNext.addEventListener("click",(()=>{swiperEl.swiper.slideNext()})),btnPrev.addEventListener("click",(()=>{swiperEl.swiper.slidePrev()}))}}))}smiInitComplementaryProduct(){if("undefined"!=typeof SMI_Slider){const selector=`#smi-${this.sectionId} .smi-product-detai-complementary-products-wrapper`,selector_swiper=`#smi-${this.sectionId} .smi-complementary-products-swiper .smi-product-detai-complementary-products-wrapper`,parent=document.querySelector(selector);let secEl=document.querySelector(`#smi_complementary_products_${this.sectionId} .smi-pagination`);if(parent){let options=JSON.parse(parent.getAttribute("data-slider"));options?.autoPlay&&options?.speed&&(options.autoplay={delay:parseInt(options.speed)}),delete options.speed,options.loop=!1,options.watchSlidesProgress=!0,options.spaceBetween=30,options.breakpoints={0:{spaceBetween:15,slidesPerView:"auto"},768:{slidesPerView:options.tabletItems,spaceBetween:15},992:{slidesPerView:options.destopItems,spaceBetween:30}},options.pagination={el:secEl,clickable:!0},options.dotStyle.includes("text-style")&&(options.pagination.type="fraction"),new SMI_Slider(selector_swiper,options)}}}smiInitBundleProduct(){if("undefined"!=typeof SMI_Slider){const selector=`#smi-${this.sectionId} .smi-product-detai-bundle-products-wrapper`,selector_swiper=`#smi-${this.sectionId} .smi-bundle-products-swiper .smi-product-detai-bundle-products-wrapper`;let secEl=document.querySelector(`#smi_bundle_products_${this.sectionId} .smi-pagination`),getCurrenyFormat=document.querySelector(`#smi_bundle_products_${this.sectionId}`).getAttribute("data-bundle");this.curreny_format_first=getCurrenyFormat,this.curreny_format=getCurrenyFormat.substring(getCurrenyFormat.indexOf("{")+2,getCurrenyFormat.indexOf("}"));const parent=document.querySelector(selector);if(parent){let options=JSON.parse(parent.getAttribute("data-slider"));options?.autoPlay&&options?.speed&&(options.autoplay={delay:parseInt(options.speed)}),delete options.speed,options.loop=!1,options.watchSlidesProgress=!0,options.spaceBetween=30,options.breakpoints={0:{spaceBetween:15,slidesPerView:"auto"},768:{slidesPerView:options.tabletItems,spaceBetween:15},992:{slidesPerView:options.destopItems,spaceBetween:30}},options.pagination={el:secEl,clickable:!0},options.dotStyle.includes("text-style")&&(options.pagination.type="fraction"),new SMI_Slider(selector_swiper,options)}let onClickBundle=!1;document.getElementById(`smi_bundle_products_${this.sectionId}`)&&window.addEventListener("click",(()=>{document.querySelectorAll(`.list-variant-bundle-product-${this.sectionId}`).forEach((item=>{item.classList.add("hide-list-variant-bundle-product")}));for(let i=0;i<=10;i++)document.querySelector(`.arr-icon-down-bundle-${i}_${this.sectionId}`)&&document.querySelector(`.arr-icon-down-bundle-${i}_${this.sectionId}`).classList.remove("hide-arr-icon-bunde"),document.querySelector(`.arr-icon-up-bundle-${i}_${this.sectionId}`)&&document.querySelector(`.arr-icon-up-bundle-${i}_${this.sectionId}`).classList.add("hide-arr-icon-bunde")}));for(let i=0;i<=10;i++){document.getElementById(`bundle_product_variant_select_variant_${i}_${this.sectionId}`)&&document.getElementById(`bundle_product_variant_select_variant_${i}_${this.sectionId}`).addEventListener("click",(()=>{document.getElementById(`list_variant_bundle_${i}_${this.sectionId}`)&&(document.getElementById(`list_variant_bundle_${i}_${this.sectionId}`).classList.contains("hide-list-variant-bundle-product")?(document.querySelectorAll(`.list-variant-bundle-product-${this.sectionId}`).forEach((item=>{item.classList.add("hide-list-variant-bundle-product")})),setTimeout((()=>{document.getElementById(`list_variant_bundle_${i}_${this.sectionId}`)&&document.getElementById(`list_variant_bundle_${i}_${this.sectionId}`).classList.remove("hide-list-variant-bundle-product"),document.querySelector(`.arr-icon-down-bundle-${i}_${this.sectionId}`)&&document.querySelector(`.arr-icon-down-bundle-${i}_${this.sectionId}`).classList.add("hide-arr-icon-bunde"),document.querySelector(`.arr-icon-up-bundle-${i}_${this.sectionId}`)&&document.querySelector(`.arr-icon-up-bundle-${i}_${this.sectionId}`).classList.remove("hide-arr-icon-bunde"),onClickBundle=!1}),10)):(onClickBundle=!0,document.getElementById(`list_variant_bundle_${i}_${this.sectionId}`)&&document.getElementById(`list_variant_bundle_${i}_${this.sectionId}`).classList.add("hide-list-variant-bundle-product")))})),document.getElementById(`checkbox_select_product_bundle_${i}_${this.sectionId}`)&&document.getElementById(`checkbox_select_product_bundle_${i}_${this.sectionId}`).addEventListener("change",(()=>{if(document.getElementById(`checkbox_select_product_bundle_${i}_${this.sectionId}`).checked){if(this.total_bundle_selected=this.total_bundle_selected+1,this.list_bundle_selected_purchase.includes(i)){let position=this.list_bundle_selected_purchase.indexOf(i);this.list_bundle_selected_purchase.splice(position,1)}this._cal_bundle_product_total_purchase(),this._cal_bundle_product_total_purchase_max_price(),document.getElementById(`product_bundle_image_${i}_${this.sectionId}`).classList.remove("unchecked-bundle-55"),document.getElementById(`product_bundle_content_${i}_${this.sectionId}`).classList.remove("unchecked-bundle-55"),document.getElementById(`bundle_product_variant_select_variant_${i}_${this.sectionId}`)&&document.getElementById(`bundle_product_variant_select_variant_${i}_${this.sectionId}`).removeAttribute("disabled")}else this.list_bundle_selected_purchase.push(i),this.total_bundle_selected=this.total_bundle_selected-1,this._cal_bundle_product_total_purchase(),this._cal_bundle_product_total_purchase_max_price(),document.getElementById(`product_bundle_image_${i}_${this.sectionId}`).classList.add("unchecked-bundle-55"),document.getElementById(`product_bundle_content_${i}_${this.sectionId}`).classList.add("unchecked-bundle-55"),document.getElementById(`bundle_product_variant_select_variant_${i}_${this.sectionId}`)&&document.getElementById(`bundle_product_variant_select_variant_${i}_${this.sectionId}`).setAttribute("disabled",!0)}));for(let j=0;j<100;j++)document.getElementById(`li_list_variant_bundle_${i}_${j}_${this.sectionId}`)&&document.getElementById(`li_list_variant_bundle_${i}_${j}_${this.sectionId}`).addEventListener("click",(()=>{document.querySelectorAll(`#list_variant_bundle_${i}_${this.sectionId} .smi-text-sm`).forEach((index=>{index.classList.add("smi-text-75")})),document.getElementById(`li_list_variant_bundle_${i}_${j}_${this.sectionId}`).classList.remove("smi-text-75");let variant_id=document.getElementById(`li_list_variant_bundle_${i}_${j}_${this.sectionId}`).getAttribute("variant-id"),price_with_currency=document.getElementById(`li_list_variant_bundle_${i}_${j}_${this.sectionId}`).getAttribute("price-with-currency"),price_with_currency_max=document.getElementById(`li_list_variant_bundle_${i}_${j}_${this.sectionId}`).getAttribute("price-with-currency-max"),cal_price=document.getElementById(`li_list_variant_bundle_${i}_${j}_${this.sectionId}`).getAttribute("cal-price"),img_url=document.getElementById(`li_list_variant_bundle_${i}_${j}_${this.sectionId}`).getAttribute("img-url");document.getElementById(`bundle_product_variant_select_variant_title_${i}_${this.sectionId}`).innerHTML=document.getElementById(`li_list_variant_bundle_${i}_${j}_${this.sectionId}`).innerHTML,document.getElementById(`list_variant_bundle_${i}_${this.sectionId}`).classList.add("hide-list-variant-bundle-product"),document.getElementById(`span_variant_bundle_money_${i}_${this.sectionId}`).innerHTML=price_with_currency,document.getElementById(`span_variant_bundle_money_max_${i}_${this.sectionId}`)&&(document.getElementById(`span_variant_bundle_money_max_${i}_${this.sectionId}`).style.display=price_with_currency_max==price_with_currency?"none":"block"),document.getElementById(`selected_variant_bundle_${i}_${this.sectionId}`).value=price_with_currency,document.getElementById(`selected_variant_bundle_${i}_${this.sectionId}`).value=cal_price,document.getElementById(`selected_variant_bundle_id_${i}_${this.sectionId}`).value=variant_id,img_url.includes("Liquid error")||(document.getElementById(`product_bundle_image_${i}_${this.sectionId}`).src=img_url,document.getElementById(`product_bundle_image_${i}_${this.sectionId}`).srcset=`${img_url}&width=352 352w, ${img_url}&width=500 500w`),this._cal_bundle_product_total_purchase(),this._cal_bundle_product_total_purchase_max_price()}))}setTimeout((()=>{if(this._cal_bundle_product_total_purchase(),this._cal_bundle_product_total_purchase_max_price(),document.getElementById(`btn_add_to_cart_bundle_${this.sectionId}`)){var old_element=document.getElementById(`btn_add_to_cart_bundle_${this.sectionId}`),new_element=old_element.cloneNode(!0);old_element.parentNode.replaceChild(new_element,old_element),document.getElementById(`btn_add_to_cart_bundle_${this.sectionId}`).addEventListener("click",(()=>{let items=[];this.list_bundled_add_to_cart_all.forEach((item=>{items.push({id:item,quantity:1})}));let formdata_add={items:items};fetch(window.Shopify.routes.root+"cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(formdata_add)}).then((response=>{var old_element_main=document.getElementById(`smi_bundle_products_${this.sectionId}`),new_element_main=old_element_main.cloneNode(!0);old_element_main.parentNode.replaceChild(new_element_main,old_element_main),setTimeout((()=>{this.renderComplementaryProducts(this.sectionId),setTimeout((()=>{this.renderBundleProducts(this.sectionId),document.dispatchEvent(new CustomEvent("smiCartDrawerRender"))}),200)}),500)})).catch((error=>{console.error("Error:",error)}))}))}}),1e3)}}_cal_bundle_product_total_purchase(){let unchecked_list=this.list_bundle_selected_purchase;if(document.getElementById(`bundle_product_total_price_${this.sectionId}`)){let list_bundled_add_to_cart=[],totalPrice=0;for(let i=0;i<=10;i++)document.getElementById(`selected_variant_bundle_${i}_${this.sectionId}`)&&!unchecked_list.includes(i)&&(totalPrice+=parseFloat(document.getElementById(`selected_variant_bundle_${i}_${this.sectionId}`).value),list_bundled_add_to_cart=[...list_bundled_add_to_cart,document.getElementById(`selected_variant_bundle_id_${i}_${this.sectionId}`).value]);this.list_bundled_add_to_cart_all=list_bundled_add_to_cart,document.getElementById(`bundle_product_total_price_${this.sectionId}`).innerHTML=this.formatMoney(totalPrice,this.curreny_format)}}_cal_bundle_product_total_purchase_max_price(){this.total_recommendation==this.total_bundle_selected?(document.querySelector(`#btn_add_to_cart_bundle_${this.sectionId} #purchase_buddle_all_${this.sectionId}`)&&(document.querySelector(`#btn_add_to_cart_bundle_${this.sectionId} #purchase_buddle_all_${this.sectionId}`).style.display="block"),document.querySelector(`#btn_add_to_cart_bundle_${this.sectionId} #purchase_buddle_${this.sectionId}`)&&(document.querySelector(`#btn_add_to_cart_bundle_${this.sectionId} #purchase_buddle_${this.sectionId}`).style.display="none")):(document.querySelector(`#btn_add_to_cart_bundle_${this.sectionId} #purchase_buddle_all_${this.sectionId}`)&&(document.querySelector(`#btn_add_to_cart_bundle_${this.sectionId} #purchase_buddle_all_${this.sectionId}`).style.display="none"),document.querySelector(`#btn_add_to_cart_bundle_${this.sectionId} #purchase_buddle_${this.sectionId}`)&&(document.querySelector(`#btn_add_to_cart_bundle_${this.sectionId} #purchase_buddle_${this.sectionId}`).style.display="block"),document.querySelector(`#btn_add_to_cart_bundle_${this.sectionId} #purchase_buddle_${this.sectionId} .item-bunble-selected`).innerHTML=`${this.total_bundle_selected+1}`);let unchecked_list=this.list_bundle_selected_purchase;if(document.getElementById(`bundle_product_total_max_price_${this.sectionId}`)){let totalPrice=0;for(let i=0;i<=10;i++)document.getElementById(`bundle_variant_max_price_${i}_${this.sectionId}`)&&!unchecked_list.includes(i)&&(totalPrice+=parseFloat(document.getElementById(`bundle_variant_max_price_${i}_${this.sectionId}`).value));document.getElementById(`bundle_product_total_max_price_${this.sectionId}`).innerHTML=this.formatMoney(totalPrice,this.curreny_format)}}defaultValue(value,defaultValue){return null==value||value!=value?defaultValue:value}formatAmount(amount,decimals,thousandsSeparator,decimalSeparator){if(decimals=this.defaultValue(decimals,2),thousandsSeparator=this.defaultValue(thousandsSeparator,","),decimalSeparator=this.defaultValue(decimalSeparator,"."),isNaN(amount)||null==amount)return 0;let formattedAmount=(amount=(amount/100).toFixed(decimals)).split(".");return formattedAmount[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+thousandsSeparator)+(formattedAmount[1]?decimalSeparator+formattedAmount[1]:"")}formatMoney(amount,currencyType=""){"string"==typeof amount&&(amount=amount.replace(".",""));let result="";switch(currencyType){case"amount":result=this.formatAmount(amount,2);break;case"amount_no_decimals":result=this.formatAmount(amount,0);break;case"amount_with_space_separator":result=this.formatAmount(amount,2," ",".");break;case"amount_with_comma_separator":result=this.formatAmount(amount,2,".",",");break;case"amount_with_apostrophe_separator":result=this.formatAmount(amount,2,"'",".");break;case"amount_no_decimals_with_comma_separator":result=this.formatAmount(amount,0,".",",");break;case"amount_no_decimals_with_space_separator":result=this.formatAmount(amount,0," ");break;case"amount_no_decimals_with_apostrophe_separator":result=this.formatAmount(amount,0,"'")}return this.curreny_format_first.replace(this.curreny_format,result).replaceAll("{","").replaceAll("}","")}};