var SMI_ProductDetail=function(){"use strict";return class{sectionEl=null;sectionId=null;constructor(_sectionID){this.sectionID=_sectionID,this.indexCheckNum=0,this.fetchVariant=!1,this._setValueVariantDs(_sectionID),this.controller=new AbortController,this.signal=this.controller.signal,this.indexCheckFetch=0,this.idSelected="",this.allVariant=[],this.curreny_format="",this.curreny_format_first=""}_setValueVariantDs(sectionID){let section_id=sectionID.replace("smi-",""),listProductItem=[],fristVariant="",secVariant="",thirdVariant="",fristSelectedValue_C="",secSelectedValue_C="",thirdSelectedValue_C="",product_url="",allQuantity=0,idItemSelected="",setting_variant_color="",setting_variant_size="",listFinal=[],list_options=[],allBlock=document.querySelectorAll(`.smi-product-block-${section_id}`);try{allBlock[allBlock.length-1].classList.remove("smi-mb-lg"),allBlock[allBlock.length-1].classList.remove("smi-mb-md"),allBlock[allBlock.length-1].classList.remove("smi-mb-sm"),allBlock[allBlock.length-1].classList.remove("smi-mb-xs")}catch(err){console.log("err-remove-mb: ",err)}if(document.querySelector(`.smi-data-product-variant-${section_id}`)&&document.querySelector(`.smi-data-options-list-${section_id}`)){const productVariantData=document.querySelector(`.smi-data-product-variant-${section_id}`),productOptionList=document.querySelector(`.smi-data-options-list-${section_id}`),dataVariant=JSON.parse(productVariantData.getAttribute("data-variant"));list_options=JSON.parse(productOptionList.getAttribute("data-variant-option")).options.split(",");let first_variant_value=dataVariant.first_variant_value,sec_variant_value=dataVariant.sec_variant_value,third_variant_value=dataVariant.third_variant_value;product_url=dataVariant.product_url,allQuantity=document.getElementById(`target_inventory_quantity_${section_id}`).value;let today=(new Date).toISOString().split("T")[0];document.getElementById("gift_card_send_on")&&document.getElementById("gift_card_send_on").setAttribute("min",today),document.getElementById(`setting_variant_color_${section_id}`)&&(setting_variant_color=document.getElementById(`setting_variant_color_${section_id}`).value),document.getElementById(`setting_size_chart_variant_name${section_id}`)&&(setting_variant_size=document.getElementById(`setting_size_chart_variant_name${section_id}`).value),this._replacePurchaseButton(section_id,dataVariant.button_type),fristSelectedValue_C=first_variant_value,secSelectedValue_C=sec_variant_value,thirdSelectedValue_C=third_variant_value;let fristSelectedValue="",secSelectedValue="",thirdSelectedValue="";null==document.getElementById("option_1_variant")&&null==document.getElementById("option_1_variant")||(fristVariant=document.getElementById("option_1_variant").value,fristSelectedValue=document.getElementById(`slected_${fristVariant}_value`).value),null==document.getElementById("option_2_variant")&&null==document.getElementById("option_2_variant")||(secVariant=document.getElementById("option_2_variant").value,secSelectedValue=document.getElementById(`slected_${secVariant}_value`).value),null==document.getElementById("option_3_variant")&&null==document.getElementById("option_3_variant")||(thirdVariant=document.getElementById("option_3_variant").value,thirdSelectedValue=document.getElementById(`slected_${thirdVariant}_value`).value);for(let i=0;i<150;i++){let ele=document.getElementById(`product_id_${i}`);if(null!=ele&&null!=ele){let productId=ele.value;listProductItem.push({id:productId.substring(0,productId.indexOf("_$")),type:productId.substring(productId.indexOf("_$")+2,productId.length)})}}for(let j=0;j<listProductItem.length;j++){let tyN=listProductItem[j].type.split("_t_");for(let k=0;k<tyN.length;k++)listFinal.push({type:list_options[k],value:`${tyN[k].replaceAll(" ","").replaceAll("(","").replaceAll(")","").replaceAll(".","").replaceAll("/","").replaceAll("+","").replaceAll(":","").replaceAll('"',"").replaceAll("'","").replaceAll("|","")}`,main_v:`${tyN[k]}`})}listFinal=listFinal.reduce(((unique,o)=>(unique.some((obj=>obj.label===o.label&&obj.value===o.value))||unique.push(o),unique)),[]);for(let i=0;i<listProductItem.length;i++)listProductItem[i].type.includes(fristSelectedValue)&&listProductItem[i].type.includes(secSelectedValue)&&listProductItem[i].type.includes(thirdSelectedValue)&&(idItemSelected=listProductItem[i].id);let url=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,hash=window.location.hash,search_variant=new URL(url).searchParams.get("variant");null==search_variant||(idItemSelected=search_variant),document.getElementById(`product_variant_selected_${section_id}`).value=idItemSelected,this._checkPPDT(section_id,listProductItem,fristVariant,secVariant,thirdVariant,fristSelectedValue_C,secSelectedValue_C,thirdSelectedValue_C,product_url,allQuantity,idItemSelected,setting_variant_color,listFinal,list_options);const queryString=window.location.search;let refresh="",urlParams=new URLSearchParams(queryString.substring(1,queryString.length));try{const entries=urlParams.entries(),params=this.paramsToObject(entries);params.variant=idItemSelected;let search=Object.keys(params).map((function(key){return key+"="+params[key]})).join("&");refresh=window.location.protocol+"//"+window.location.host+window.location.pathname+`?${search}`+`${hash}`}catch(error){}window.history.pushState({path:refresh},"",refresh)}}_checkPPDT(section_id,listProductItem,fristVariant,secVariant,thirdVariant,fristSelectedValue_C,secSelectedValue_C,thirdSelectedValue_C,product_url,allQuantity,idItemSelected,setting_variant_color,listFinal,list_options){for(let i=0;i<listFinal.length;i++)document.querySelector(`.t_${listFinal[i].value}_${section_id}`)&&document.querySelector(`.t_${listFinal[i].value}_${section_id}`).addEventListener("click",(()=>{this.idSelected!=`.t_${listFinal[i].value}_${section_id}`&&(this.idSelected=`.t_${listFinal[i].value}_${section_id}`,this.controller.abort(),this._checkProductAvailable(listFinal[i].type,listFinal[i].main_v.trim(),this.indexCheckNum,section_id,listProductItem,fristVariant,secVariant,thirdVariant,fristSelectedValue_C,secSelectedValue_C,thirdSelectedValue_C,product_url,allQuantity,idItemSelected,setting_variant_color,listFinal,list_options),this._indexCheck())}));for(let i=0;i<list_options.length;i++)document.getElementById(`btn_dd_${list_options[i]}`)&&"ok"!=document.getElementById(`btn_dd_${list_options[i]}`)?.getAttribute("listener-ev")&&(document.getElementById(`btn_dd_${list_options[i]}`).setAttribute("listener-ev","ok"),document.getElementById(`btn_dd_${list_options[i]}`).addEventListener("click",(()=>{this._selectItem(`list_${list_options[i].trim()}`,`btn_dd_${list_options[i].trim()}`,`arr_list_${list_options[i].trim()}_down`,`arr_list_${list_options[i].trim()}_up`)})))}_checkProductAvailable(type,value,index,section_id,listProductItem,fristVariant,secVariant,thirdVariant,fristSelectedValue_C,secSelectedValue_C,thirdSelectedValue_C,product_url,allQuantity,idItemSelected,setting_variant_color,listFinal,list_options){this.indexCheckFetch=this.indexCheckFetch+1,this.fetchVariant=!1;let host=window.location.hostname,selectedListType=document.querySelectorAll(`.product_variant_select_${type}-${section_id}`),typeLS=type.toLowerCase().replaceAll(" ","");selectedListType.length>0&&selectedListType.forEach((index=>{typeLS==setting_variant_color||typeLS.includes("color")||typeLS.includes("colour")?index.classList.remove("product-color-selected-variant"):index.classList.remove("product-button-selected-item")})),document.getElementById(`product_variant_select_${value.replaceAll(" ","").replaceAll("(","").replaceAll(")","").replaceAll(".","").replaceAll("/","").replaceAll("+","").replaceAll(":","").replaceAll('"',"").replaceAll("'","").replaceAll("|","")}_${section_id}`)&&(typeLS==setting_variant_color||typeLS.includes("color")||typeLS.includes("colour")?document.getElementById(`product_variant_select_${value.replaceAll(" ","").replaceAll("(","").replaceAll(")","").replaceAll(".","").replaceAll("/","").replaceAll("+","").replaceAll(":","").replaceAll('"',"").replaceAll("'","").replaceAll("|","")}_${section_id}`).classList.add("product-color-selected-variant"):document.getElementById(`product_variant_select_${value.replaceAll(" ","").replaceAll("(","").replaceAll(")","").replaceAll(".","").replaceAll("/","").replaceAll("+","").replaceAll(":","").replaceAll('"',"").replaceAll("'","").replaceAll("|","")}_${section_id}`).classList.add("product-button-selected-item"));const ids=listProductItem.map((({id:id})=>id));listProductItem=listProductItem.filter((({id:id},index)=>!ids.includes(id,index+1))),type==fristVariant?fristSelectedValue_C=value:type==secVariant?secSelectedValue_C=value:type==thirdVariant&&(thirdSelectedValue_C=value);let quick=!1,listSameFirstVariant=[];for(let i=0;i<listProductItem.length;i++)listProductItem[i].type.includes(fristSelectedValue_C)&&listProductItem[i].type.includes(`_t_ ${secSelectedValue_C}`)&&!listProductItem[i].type.includes(`_t_ ${thirdSelectedValue_C}`)?listSameFirstVariant.push(listProductItem[i]):listProductItem[i].type==`${fristSelectedValue_C}${""!=secSelectedValue_C?` _t_ ${secSelectedValue_C}`:""}${""!=thirdSelectedValue_C?` _t_ ${thirdSelectedValue_C}`:""}`?(listProductItem[i]&&(idItemSelected=listProductItem[i].id),quick=!0):!listProductItem[i].type.includes(fristSelectedValue_C)||listProductItem[i].type.includes(`_t_ ${secSelectedValue_C}`)||listProductItem[i].type.includes(`_t_ ${thirdSelectedValue_C}`)||listSameFirstVariant.push(listProductItem[i]);let containTwoVariant=!1;if(0==quick){let list_kd2=[],list_kd1=[];for(let j=0;j<listSameFirstVariant.length;j++)listSameFirstVariant[j].type.includes(`${fristSelectedValue_C}${""!=secSelectedValue_C?` _t_ ${secSelectedValue_C}`:""}`)?(containTwoVariant=!0,list_kd2.push(listSameFirstVariant[j])):list_kd1.push(listSameFirstVariant[0]);idItemSelected=0==containTwoVariant?list_kd1[0]?.id:list_kd2[0]?.id}let variant_quantity=0,variant_policy=0;if(document.getElementById(`json_variant_${section_id}`)){this.allVariant=JSON.parse(document.getElementById(`json_variant_${section_id}`).getAttribute("data-variant-check"));let all_variant_quantity=document.getElementById(`json_variant_${section_id}`).getAttribute("data-variant-inventory-quatity").toString();all_variant_quantity=JSON.parse(`{${all_variant_quantity}}`),variant_quantity=all_variant_quantity[idItemSelected].inventory_quantity,variant_policy=all_variant_quantity[idItemSelected].inventory_policy}let currentVariantCheck={};this.allVariant.forEach(((index,i)=>{index.id==idItemSelected&&(currentVariantCheck=index)}));let getCurrenyFormat=document.getElementById(`json_variant_${section_id}`).getAttribute("data-bundle");this.curreny_format_first=getCurrenyFormat,this.curreny_format=getCurrenyFormat.substring(getCurrenyFormat.indexOf("{")+2,getCurrenyFormat.indexOf("}"));let show_badge="false",badge_text="Sale",badge_type="percent";if(document.getElementById(`is_sale_badge_price_${section_id}`)){show_badge=document.getElementById(`is_sale_badge_price_${section_id}`).value,document.getElementById(`is_sale_badge_price_${section_id}`).getAttribute("data-bagde").includes("%")||(badge_type="amount"),badge_text=document.getElementById(`is_sale_badge_price_${section_id}`).getAttribute("data-bagde-text")}if(currentVariantCheck.price<currentVariantCheck.compare_at_price&&""!=currentVariantCheck.compare_at_price&&null!=currentVariantCheck.compare_at_price&&null!=currentVariantCheck.compare_at_price&&currentVariantCheck.compare_at_price>0){let priceHtml="";priceHtml=0==currentVariantCheck.available?'<div class="price-sale">\n            <span\n              class="smi-badges smi-badges--sold-out sale-content badge-sold-out smi-color-{{ settings.smi_sold_out_badge_color_scheme }} smi-text-badge " > <span>Sold out</span> </span> </div>':`<div class="price-sale"> <span class="listed-price smi-text-price-lg"> ${this.formatMoney(currentVariantCheck.compare_at_price,this.curreny_format)} </span>\n            <span class="sale-price smi-text-price-xl"> ${this.formatMoney(currentVariantCheck.price,this.curreny_format)} </span>\n            ${"false"!=show_badge?`<span class="sale-content smi-text-badge smi-badges {% if has_color_block == true %} badge-sale {% else %} smi-color-{{ settings.smi_sale_badge_color_scheme }} {% endif %} " >${badge_text} ${"percent"==badge_type?`${parseInt(Math.round((currentVariantCheck.compare_at_price-currentVariantCheck.price)/currentVariantCheck.compare_at_price*100))}%`:`${this.formatMoney(currentVariantCheck.compare_at_price-currentVariantCheck.price,this.curreny_format)}`}</span>`:""}</div>`,document.getElementById(`product_price_content_${section_id}`)&&(document.getElementById(`product_price_content_${section_id}`).innerHTML=priceHtml)}else if(currentVariantCheck.price>=currentVariantCheck.compare_at_price||""==currentVariantCheck.compare_at_price||null==currentVariantCheck.compare_at_price||null==currentVariantCheck.compare_at_price){let priceHtml="";priceHtml=0==currentVariantCheck.available?' <div class=" price-sale smi-text-badge" > <span class=" smi-badges smi-badges--sold-out {% if has_color_block == true %} badge-sold-out\n            {% else %} smi-color-{{ settings.smi_sold_out_badge_color_scheme }} {% endif %} sale-content"><span class="product-price-sold-out">Sold out</span></span></div>':`<div class=" price-sale smi-text-price-xl" >\n              ${this.formatMoney(currentVariantCheck.price,this.curreny_format)}</div>`,document.getElementById(`product_price_content_${section_id}`)&&(document.getElementById(`product_price_content_${section_id}`).innerHTML=priceHtml)}let final_color=1,show_inventory_status="false",low_inventory_threshold=0;if(document.getElementById(`product_sku_${section_id}`)&&null!=currentVariantCheck.sku&&null!=currentVariantCheck.sku&&""!=currentVariantCheck.sku?(document.getElementById(`product_sku_${section_id}`).innerHTML=`\n            <div class="product-sku smi-text-sm">\n                <span style="opacity: 0.75">sku:</span>&nbsp;<span>${currentVariantCheck.sku}</span>\n            </div>\n            `,document.getElementById(`product_sku_${section_id}`).classList.add("smi-mb-lg")):document.getElementById(`product_sku_${section_id}`)&&(document.getElementById(`product_sku_${section_id}`).innerHTML="",document.getElementById(`product_sku_${section_id}`).classList.remove("smi-mb-lg")),document.getElementById(`inventory_status_low_${section_id}`)){low_inventory_threshold=parseInt(document.getElementById(`inventory_status_low_${section_id}`).value),show_inventory_status=document.getElementById(`inventory_status_show_${section_id}`).value,"shopify"!=currentVariantCheck.inventory_management||low_inventory_threshold<variant_quantity&&variant_quantity>0?final_color=1:low_inventory_threshold>=variant_quantity&&("deny"==variant_policy?variant_quantity>=0&&1==currentVariantCheck.available?final_color=0==variant_quantity?1:2:0==variant_quantity&&0==currentVariantCheck.available&&(final_color=3):final_color=1);let icon_ivd_html=`<div class="green-dot" style="\n                      ${1==final_color?"animation: border-pulsate-1 2s infinite;\n                        background: rgba(84, 198, 58, 0.15);\n                          border: 3px solid rgba(84, 198, 58, 1);":2==final_color?" animation: border-pulsate-2 2s infinite;\n                      background: rgba(238, 148, 65, 0.15);\n                      border: 3px solid rgba(238, 148, 65, 1);":"animation: border-pulsate-3 2s infinite;\n                      background: rgba(200, 200, 200, 0.15);\n                          border: 3px solid rgba(200, 200, 200, 1);"} " >\n                    <svg\n                      style="height: 10px; width: 10px;"\n                      xmlns="http://www.w3.org/2000/svg"\n                      width="11"\n                      height="11"\n                      viewBox="0 0 10 10"\n                      fill="none"\n                    >\n                      <circle cx="5" cy="5" r="5"\n                        fill="${1==final_color?"#54C63A":2==final_color?"#ee9441":"#c8c8c8"}"/>\n                    </svg>\n                  </div> `,content_ivs_html="";"shopify"!=currentVariantCheck.inventory_management?content_ivs_html='<span style="opacity: 0.75">In stock</span>':low_inventory_threshold<variant_quantity&&variant_quantity>0?content_ivs_html="true"==show_inventory_status?`<span style="opacity: 1">${variant_quantity}&nbsp;<span style="opacity: 0.75">In stock</span></span>`:'<span style="opacity: 0.75">In stock</span>':low_inventory_threshold>=variant_quantity&&("deny"==variant_policy?variant_quantity>=0&&1==currentVariantCheck.available?content_ivs_html=0==variant_quantity?'<span style="opacity: 0.75">In stock</span>':"true"==show_inventory_status?`<span style="opacity: 1"><span style="opacity: 0.75">Low stock:</span>&nbsp${variant_quantity}&nbsp;<span style="opacity: 0.75">left</span></span>`:'<span style="opacity: 0.75">Low stock</span>':0==variant_quantity&&0==currentVariantCheck.available&&(content_ivs_html='<span style="opacity: 0.75">Out of stock</span>'):content_ivs_html='<span style="opacity: 0.75">In stock</span>'),document.getElementById(`inventory_status_re_select_${section_id}`)&&(document.getElementById(`inventory_status_re_select_${section_id}`).innerHTML=`${icon_ivd_html}${content_ivs_html}`)}document.getElementById(`smi_block_variant_${section_id}`)&&document.getElementById(`smi_block_variant_fetch_${idItemSelected}_${section_id}`)&&(document.getElementById(`smi_block_variant_${section_id}`).innerHTML=document.getElementById(`smi_block_variant_fetch_${idItemSelected}_${section_id}`).innerHTML),function(){let event=new CustomEvent("smiVariantChange",{detail:{id:idItemSelected,sectionId:section_id}});document.dispatchEvent(event)}(),document.getElementById(`product_price_${section_id}`)&&document.getElementById(`product_price_fetch_${idItemSelected}_${section_id}`)&&(document.getElementById(`product_price_${section_id}`).innerHTML=document.getElementById(`product_price_fetch_${idItemSelected}_${section_id}`).innerHTML),document.getElementById(`inventory_status_container_${section_id}`)&&document.getElementById(`inventory_status_container_fetch_${idItemSelected}_${section_id}`)&&(document.getElementById(`inventory_status_container_${section_id}`).innerHTML=document.getElementById(`inventory_status_container_fetch_${idItemSelected}_${section_id}`).innerHTML),document.getElementById(`product_sku_${section_id}`)&&document.getElementById(`product_sku_fetch_${idItemSelected}_${section_id}`)&&(document.getElementById(`product_sku_${section_id}`).innerHTML=document.getElementById(`product_sku_fetch_${idItemSelected}_${section_id}`).innerHTML),document.getElementById(`check_item_in_cart_${section_id}`)&&document.getElementById(`check_item_in_cart_fetch_${idItemSelected}_${section_id}`)&&(document.getElementById(`check_item_in_cart_${section_id}`).innerHTML=document.getElementById(`check_item_in_cart_fetch_${idItemSelected}_${section_id}`).innerHTML),document.getElementById(`check_item_in_cart2_${section_id}`)&&document.getElementById(`check_item_in_cart2_fetch_${idItemSelected}_${section_id}`)&&(document.getElementById(`check_item_in_cart2_${section_id}`).innerHTML=document.getElementById(`check_item_in_cart2_fetch_${idItemSelected}_${section_id}`).innerHTML),document.getElementById(`msg_notice_cart_item_added_all_${section_id}`)&&document.getElementById(`msg_notice_cart_item_added_all_fetch_${idItemSelected}_${section_id}`)&&(document.getElementById(`msg_notice_cart_item_added_all_${section_id}`)&&(document.getElementById(`msg_notice_cart_item_added_all_${section_id}`).innerHTML=document.getElementById(`msg_notice_cart_item_added_all_fetch_${idItemSelected}_${section_id}`).innerHTML),this.addClasslist(`msg_notice_cart_item_added_all_${section_id}`,"hide-msg-noti-cart-item")),document.getElementById(`msg_notice_cart_item_added_all2_${section_id}`)&&document.getElementById(`msg_notice_cart_item_added_all2_fetch_${idItemSelected}_${section_id}`)&&(document.getElementById(`msg_notice_cart_item_added_all2_${section_id}`)&&(document.getElementById(`msg_notice_cart_item_added_all2_${section_id}`).innerHTML=document.getElementById(`msg_notice_cart_item_added_all2_fetch_${idItemSelected}_${section_id}`).innerHTML),this.addClasslist(`msg_notice_cart_item_added_all2_${section_id}`,"hide-msg-noti-cart-item")),document.getElementById(`msg_notice_cart_item_${section_id}`)&&document.getElementById(`msg_notice_cart_item_fetch_${idItemSelected}_${section_id}`)&&(document.getElementById(`msg_notice_cart_item_${section_id}`)&&(document.getElementById(`msg_notice_cart_item_${section_id}`).innerHTML=document.getElementById(`msg_notice_cart_item_fetch_${idItemSelected}_${section_id}`).innerHTML),this.addClasslist(`msg_notice_cart_item_${section_id}`,"hide-msg-noti-cart-item")),document.getElementById(`msg_notice_cart_item2_${section_id}`)&&document.getElementById(`msg_notice_cart_item2_fetch_${idItemSelected}_${section_id}`)&&(document.getElementById(`msg_notice_cart_item2_${section_id}`)&&(document.getElementById(`msg_notice_cart_item2_${section_id}`).innerHTML=document.getElementById(`msg_notice_cart_item2_fetch_${idItemSelected}_${section_id}`).innerHTML),this.addClasslist(`msg_notice_cart_item2_${section_id}`,"hide-msg-noti-cart-item")),this._checkPPDT(section_id,listProductItem,fristVariant,secVariant,thirdVariant,fristSelectedValue_C,secSelectedValue_C,thirdSelectedValue_C,product_url,allQuantity,idItemSelected,setting_variant_color,listFinal,list_options),document.getElementById(`product_quantity2_${section_id}`)&&(document.getElementById(`product_quantity2_${section_id}`).value=1),document.getElementById(`product_quantity_${section_id}`)&&(document.getElementById(`product_quantity_${section_id}`).value=1),setTimeout((()=>{this.fetchVariant=!0}),1),this.controller=new AbortController,this.signal=this.controller.signal,fetch(`//${host}/${product_url}?variant=${idItemSelected}&section_id=${section_id}`,{signal:this.signal}).then((data=>data.text())).then((res=>{if(this.indexCheckNum==index+1){let doc2=(new DOMParser).parseFromString(res,"text/html");this.replaceDomDoc2(`smi_block_variant_${section_id}`,doc2),allQuantity=doc2.getElementById(`target_inventory_quantity_${section_id}`).value;let quantity=1;null==document.getElementById("product_quantity")?document.getElementById(`product_quantity2_${section_id}`)&&(quantity=document.getElementById(`product_quantity2_${section_id}`).value):quantity=document.getElementById(`product_quantity_${section_id}`).value;let quantitySelected=1;document.getElementById(`product_quantity2_${section_id}`)?quantitySelected=document.getElementById(`product_quantity2_${section_id}`).value:document.getElementById(`product_quantity_${section_id}`)&&(quantitySelected=document.getElementById(`product_quantity_${section_id}`).value),document.getElementById(`product_add_to_cart_all_${section_id}`)&&this.replaceDomDoc2(`product_add_to_cart_all_${section_id}`,doc2),document.getElementById(`smi_product_custom_buy_${section_id}`)&&this.replaceDomDoc2(`smi_product_custom_buy_${section_id}`,doc2),document.getElementById(`target_inventory_quantity_${section_id}`)&&(document.getElementById(`target_inventory_quantity_${section_id}`).value=allQuantity),allQuantity<=1||quantity>allQuantity?this.addClasslist(`btn_plus_quantity_${section_id}`,"disable-plus-minus-quantity"):this.removeClasslist(`btn_plus_quantity_${section_id}`,"disable-plus-minus-quantity"),allQuantity<=1||quantity>allQuantity?this.addClasslist(`btn_plus_quantity_${section_id}2`,"disable-plus-minus-quantity"):this.removeClasslist(`btn_plus_quantity_${section_id}2`,"disable-plus-minus-quantity"),this.addClasslist(`btn_minus_quantity_${section_id}`,"disable-plus-minus-quantity"),this.addClasslist(`btn_minus_quantity_${section_id}2`,"disable-plus-minus-quantity"),this.replaceDomDoc2(`smi_product_custom_buy_${section_id}`,doc2),this.replaceDomDoc2(`check_item_in_cart_${section_id}`,doc2),this.replaceDomDoc2(`check_item_in_cart2_${section_id}`,doc2),document.getElementById(`msg_notice_cart_item_${section_id}`)&&(this.replaceDomDoc2(`msg_notice_cart_item_${section_id}`,doc2),this.addClasslist(`msg_notice_cart_item_${section_id}`,"hide-msg-noti-cart-item")),document.getElementById(`msg_notice_cart_item2_${section_id}`)&&(this.replaceDomDoc2(`msg_notice_cart_item2_${section_id}`,doc2),this.addClasslist(`msg_notice_cart_item2_${section_id}`,"hide-msg-noti-cart-item")),this.replaceDomDoc2(`product_add_to_cart_${section_id}`,doc2),document.getElementById(`target_inventory_policy_${section_id}`).value=doc2.getElementById(`target_inventory_policy_${section_id}`).value,document.getElementById(`target_inventory_management_${section_id}`).value=doc2.getElementById(`target_inventory_management_${section_id}`).value,this.checkAddPurchaseNumberItem_A(section_id),setTimeout((()=>{new SMI_SingleProductSection(this.sectionID)})),document.getElementById(`target_available_${section_id}`).value=doc2.getElementById(`target_available_${section_id}`).value,document.getElementById(`target_inventory_quantity_${section_id}`).value=doc2.getElementById(`target_inventory_quantity_${section_id}`).value;let target_available=doc2.getElementById(`target_available_${section_id}`).value,target_inventory_quantity=parseInt(doc2.getElementById(`target_inventory_quantity_${section_id}`).value),keep_con=document.getElementById(`target_inventory_policy_${section_id}`).value;this.cancelAddPurchase_A(section_id,keep_con,allQuantity-quantity),(0==target_available||"false"==target_available)&&target_inventory_quantity<=0?(this.disableClick_A(section_id,quantity,allQuantity),this.disablePlusMinusClick_A(section_id,keep_con,quantity,allQuantity),this.disablePlusMinusClick_A(section_id,keep_con,quantity,allQuantity,"2")):(this.enableClick_A(section_id),1==quantity?this.enablePlusMinusClick_A(section_id,"1minus"):this.enablePlusMinusClick_A(section_id)),document.getElementById(`cart_quantity_${section_id}`)&&(document.getElementById(`cart_quantity_${section_id}`).value=doc2.getElementById(`cart_quantity_${section_id}`).value),this.replaceDomDoc2(`product_price_${section_id}`,doc2),this.replaceDomDoc2(`inventory_status_container_${section_id}`,doc2),document.getElementById(`msg_notice_cart_item_added_all_${section_id}`)&&(this.replaceDomDoc2(`msg_notice_cart_item_added_all_${section_id}`,doc2),this.addClasslist(`msg_notice_cart_item_added_all_${section_id}`,"hide-msg-noti-cart-item")),document.getElementById(`msg_notice_cart_item_added_all2_${section_id}`)&&(this.replaceDomDoc2(`msg_notice_cart_item_added_all2_${section_id}`,doc2),this.addClasslist(`msg_notice_cart_item_added_all2_${section_id}`,"hide-msg-noti-cart-item")),this.replaceDomDoc2(`product_sku_${section_id}`,doc2),document.getElementById(`product_variant_selected_${section_id}`).value=idItemSelected,document.getElementById(`product_variant_selected_${section_id}`).dispatchEvent(new Event("change")),this.resetValue_A(section_id);let refresh="";const queryString=window.location.search;let urlParams=new URLSearchParams(queryString.substring(1,queryString.length));try{const entries=urlParams.entries(),params=this.paramsToObject(entries);let hash=window.location.hash;params.variant=idItemSelected;let search=Object.keys(params).map((function(key){return key+"="+params[key]})).join("&");refresh=window.location.protocol+"//"+window.location.host+window.location.pathname+`?${search}`+`${hash}`}catch(error){}window.history.pushState({path:refresh},"",refresh),document.getElementById(`product_checkout_id_${section_id}`)&&(document.getElementById(`product_checkout_id_${section_id}`).value=idItemSelected),this._checkPPDT(section_id,listProductItem,fristVariant,secVariant,thirdVariant,fristSelectedValue_C,secSelectedValue_C,thirdSelectedValue_C,product_url,allQuantity,idItemSelected,setting_variant_color,listFinal,list_options)}this.indexCheckFetch=0})).catch((err=>{console.log("Err fetching!")}))}defaultValue(value,defaultValue){return null==value||value!=value?defaultValue:value}formatAmount(amount,decimals,thousandsSeparator,decimalSeparator){if(decimals=this.defaultValue(decimals,2),thousandsSeparator=this.defaultValue(thousandsSeparator,","),decimalSeparator=this.defaultValue(decimalSeparator,"."),isNaN(amount)||null==amount)return 0;let formattedAmount=(amount=(amount/100).toFixed(decimals)).split(".");return formattedAmount[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+thousandsSeparator)+(formattedAmount[1]?decimalSeparator+formattedAmount[1]:"")}formatMoney(amount,currencyType=""){"string"==typeof amount&&(amount=amount.replace(".",""));let result="";switch(currencyType){case"amount":result=this.formatAmount(amount,2);break;case"amount_no_decimals":result=this.formatAmount(amount,0);break;case"amount_with_space_separator":result=this.formatAmount(amount,2," ",".");break;case"amount_with_comma_separator":result=this.formatAmount(amount,2,".",",");break;case"amount_with_apostrophe_separator":result=this.formatAmount(amount,2,"'",".");break;case"amount_no_decimals_with_comma_separator":result=this.formatAmount(amount,0,".",",");break;case"amount_no_decimals_with_space_separator":result=this.formatAmount(amount,0," ");break;case"amount_no_decimals_with_apostrophe_separator":result=this.formatAmount(amount,0,"'")}return this.curreny_format_first.replace(this.curreny_format,result).replaceAll("{","").replaceAll("}","")}resetValue_A(section_id){let quantity=document.getElementById(`product_quantity_${section_id}`)?.value,quantity2=document.getElementById(`product_quantity2_${section_id}`)?.value,main_quantity=document.getElementById(`product_quantity_item_${section_id}`)?.value,main_quantity2=document.getElementById(`product_quantity_item2_${section_id}`)?.value;(parseInt(quantity)>parseInt(main_quantity)||parseInt(quantity2)>parseInt(main_quantity2)||parseInt(quantity)>parseInt(main_quantity2))&&this.displayAddCartNoti_A(section_id),setTimeout((()=>{document.getElementById(`product_quantity_${section_id}`)&&(document.getElementById(`product_quantity_${section_id}`).value=1),document.getElementById(`product_quantity2_${section_id}`)&&(document.getElementById(`product_quantity2_${section_id}`).value=1),document.getElementById(`product_quantity_item_${section_id}`)&&(document.getElementById(`product_quantity_item_${section_id}`).value=1),document.getElementById(`product_quantity_item2_${section_id}`)&&(document.getElementById(`product_quantity_item2_${section_id}`).value=1)}),650)}displayAddCartNoti_A(section_id){this.removeClasslist(`msg_notice_cart_item_added_all_${section_id}`,"hide-msg-noti-cart-item"),this.removeClasslist(`msg_notice_cart_item_added_all2_${section_id}`,"hide-msg-noti-cart-item")}enablePlusMinusClick_A(section_id,va){"1minus"==va?(this.addClasslist(`btn_minus_quantity_${section_id}`,"disable-plus-minus-quantity"),this.addClasslist(`btn_minus_quantity_${section_id}2`,"disable-plus-minus-quantity")):(this.removeClasslist(`btn_minus_quantity_${section_id}`,"disable-plus-minus-quantity"),this.removeClasslist(`btn_minus_quantity_${section_id}2`,"disable-plus-minus-quantity")),this.removeClasslist(`btn_plus_quantity_${section_id}`,"disable-plus-minus-quantity"),this.removeClasslist(`btn_plus_quantity_${section_id}2`,"disable-plus-minus-quantity")}enableClick_A(section_id){document.querySelector(`.product-form__buttons-purchase-${section_id}`)?.classList.remove("disable-click"),document.querySelector(`.smi-product-add-to-card-custom-${section_id}`)?.classList.remove("disable-click"),document.querySelector(`.smi-product-add-to-card-${section_id}`)?.classList.remove("disable-click"),document.querySelector(`.smi-product-add-to-card-${section_id}`)?.classList.remove("disable-click")}disablePlusMinusClick_A(section_id,keep_con,quantity,allQuantity,mainQ){quantity>1?document.getElementById(`btn_minus_quantity_${null!=mainQ?`${section_id}2`:section_id}`)?.classList.remove("disable-plus-minus-quantity"):document.getElementById(`btn_minus_quantity_${null!=mainQ?`${section_id}2`:section_id}`)?.classList.add("disable-plus-minus-quantity"),quantity==allQuantity&&"deny"==keep_con||quantity>allQuantity&&"deny"==keep_con?document.getElementById(`btn_plus_quantity_${null!=mainQ?`${section_id}2`:section_id}`)?.classList.add("disable-plus-minus-quantity"):document.getElementById(`btn_plus_quantity_${null!=mainQ?`${section_id}2`:section_id}`)?.classList.remove("disable-plus-minus-quantity")}disableClick_A(section_id,quantity,allQuantity,mainQ){1<=quantity&&quantity<=allQuantity?(document.querySelector(`.product-form__buttons-purchase-${section_id}`)?.classList.remove("disable-click"),document.querySelector(`.smi-product-add-to-card-custom-${section_id}`)?.classList.remove("disable-click"),null!=mainQ?document.querySelector(`.smi-product-add-to-card-custom-${section_id}`)?.classList.remove("disable-click"):document.querySelector(`.smi-product-add-to-card-${section_id}`)?.classList.remove("disable-click"),document.querySelector(`.smi-product-add-to-card-${section_id}`)?.classList.remove("disable-click")):(document.querySelector(`.product-form__buttons-purchase-${section_id}`)?.classList.add("disable-click"),document.querySelector(`.smi-product-add-to-card-custom-${section_id}`)?.classList.add("disable-click"),null!=mainQ?document.querySelector(`.smi-product-add-to-card-custom-${section_id}`)?.classList.add("disable-click"):document.querySelector(`.smi-product-add-to-card-${section_id}`)?.classList.add("disable-click"))}cancelAddPurchase_A(section_id,status,quantity){let ava=document.getElementById(`target_available_${section_id}`).value;"deny"==status&&quantity<=0&&"false"==ava?(document.querySelector(`.product-form__buttons-purchase-${section_id}`)?.classList.add("disable-add-purchase"),document.querySelector(`.smi-product-add-to-card-custom-${section_id}`)?.classList.add("disable-add-purchase"),document.querySelector(`.smi-product-add-to-card-${section_id}`)?.classList.add("disable-add-purchase"),this.removeClasslist(`msg_notice_cart_item_${section_id}`,"hide-msg-noti-cart-item"),this.removeClasslist(`msg_notice_cart_item2_${section_id}`,"hide-msg-noti-cart-item")):(document.querySelector(`.product-form__buttons-purchase-${section_id}`)?.classList.remove("disable-add-purchase"),document.querySelector(`.smi-product-add-to-card-custom-${section_id}`)?.classList.remove("disable-add-purchase"),document.querySelector(`.smi-product-add-to-card-${section_id}`)?.classList.remove("disable-add-purchase"),this.addClasslist(`msg_notice_cart_item_${section_id}`,"hide-msg-noti-cart-item"),this.addClasslist(`msg_notice_cart_item2_${section_id}`,"hide-msg-noti-cart-item"))}checkAddPurchaseNumberItem_A(section_id){let quantity,allQuantity=parseInt(document.getElementById(`target_inventory_quantity_${section_id}`).value);quantity=document.getElementById(`product_quantity_${section_id}`)?parseInt(document.getElementById(`product_quantity_${section_id}`).value):parseInt(document.getElementById(`product_quantity2_${section_id}`).value);let main_quantity=0,keep_con=document.getElementById(`target_inventory_policy_${section_id}`).value,cart_quantity=parseInt(document.getElementById(`cart_quantity_${section_id}`).value);main_quantity=quantity>=allQuantity-cart_quantity&&"deny"==keep_con?allQuantity-cart_quantity:quantity,"deny"==keep_con&&main_quantity<=0?(this.removeClasslist(`msg_notice_cart_item_${section_id}`,"hide-msg-noti-cart-item"),this.removeClasslist(`msg_notice_cart_item2_${section_id}`,"hide-msg-noti-cart-item")):(this.addClasslist(`msg_notice_cart_item_${section_id}`,"hide-msg-noti-cart-item"),this.addClasslist(`msg_notice_cart_item2_${section_id}`,"hide-msg-noti-cart-item"))}replaceDomDoc2(id,doc2){document.getElementById(`${id}`)&&(document.getElementById(`${id}`).innerHTML=doc2.getElementById(`${id}`).innerHTML)}addClasslist(id,classlist){document.getElementById(`${id}`)?.classList.add(`${classlist}`)}removeClasslist(id,classlist){document.getElementById(`${id}`)?.classList.remove(`${classlist}`)}paramsToObject(entries){const result={};for(const[key,value]of entries)result[key]=value;return result}_selectItem(listName,idBtn,arrDown,arrUp){let classList=document.getElementById(`${listName}`).classList,classBtn=document.getElementById(`${idBtn}`).classList,classArrDown=document.getElementById(`${arrDown}`).classList,classArrUp=document.getElementById(`${arrUp}`).classList;classList.contains("list-dd-close-container")?(classList.remove("list-dd-close-container"),classList.add("list-dd-open-container"),classBtn.add("product-select-dropdown__button-selected"),classArrDown.remove("dropdown-list-item-show"),classArrUp.add("dropdown-list-item-show")):(classList.remove("list-dd-open-container"),classList.add("list-dd-close-container"),classBtn.remove("product-select-dropdown__button-selected"),classArrDown.add("dropdown-list-item-show"),classArrUp.remove("dropdown-list-item-show"))}_indexCheck(){this.indexCheckNum=this.indexCheckNum+1}_replacePurchaseButton(sectionId,button_type){try{purchaseBtnGroup.querySelector(".shopify-payment-button__button");thisPurchaseButton.innerHTML="Buy it now"}catch(error){}setTimeout((()=>{let section_id=sectionId.replace("smi-",""),purchaseBtnGroup=document.querySelector(`.product-form__buttons-purchase-${section_id}`);try{let thisPurchaseButton=purchaseBtnGroup.querySelector(".shopify-payment-button__button"),textButton=document.getElementById(`text_checkout_${section_id}`).value,typeHoverButton=document.getElementById(`type_hover_checkout_${section_id}`).value;if("DIV"!==thisPurchaseButton.tagName&&(thisPurchaseButton.innerHTML=textButton),thisPurchaseButton){let button_purchase_type=thisPurchaseButton.getAttribute("type");thisPurchaseButton.classList.add(`${typeHoverButton}`),null!=button_purchase_type&&(thisPurchaseButton.classList.add("shopify-payment-button__checkout_button_padding"),"button"==button_purchase_type?(thisPurchaseButton.classList.add("smi-button-warpper"),thisPurchaseButton.classList.add("smi-button"),thisPurchaseButton.classList.add("smi-text-button"),thisPurchaseButton.classList.add("shopify-payment-button__checkout_button_padding")):(thisPurchaseButton.classList.remove("shopify-payment-button__checkout_button_padding"),thisPurchaseButton.classList.add("shopify-payment-button__checkout_button_no_padding"))),thisPurchaseButton.classList.add("smi-shadow"),thisPurchaseButton.classList.add("smi-text-button-purchase"),thisPurchaseButton.classList.add(`smi-hover-${button_type}`)}}catch(error){console.log("errpbg: ",error)}}),1050)}}}();